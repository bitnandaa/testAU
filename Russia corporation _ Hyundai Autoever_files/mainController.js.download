var mainCtrl = function(){

    "use strict";
    
    var fn_set_cookie = function(cName, cValue, cDay)
    {
        var expire = new Date();
        
        expire.setDate(expire.getDate() + cDay);
        
        var cookies = cName + "=" + escape(cValue) + "; path=/ ";
        
        if (typeof cDay != "undefined")
        {
            cookies += ";expires=" + expire.toGMTString() + ";";
        }
        
        document.cookie = cookies;
    }
    
    var fn_get_cookie = function(strName)
    {
        var rtn = "N";
        var strCookieName = strName + "=";
        var objCookie = document.cookie;
        
        if (objCookie.length > 0)
        {
            var nBegin = objCookie.indexOf(strCookieName);
            
            if (nBegin < 0)
            {
                return rtn;
            }
            
            nBegin += strCookieName.length;
            
            var nEnd = objCookie.indexOf(";", nBegin);
            
            if (nEnd == -1)
            {
                nEnd = objCookie.length;
            }  
            
            return unescape(objCookie.substring(nBegin, nEnd))
        }
        else
        {
            return rtn;
        }
        
        
    }
    
    // 팝업 오늘 하루 열지 않기
    $("#todayChk").on("change", function(){
        
        if($(this).is(":checked"))
        {
            fn_set_cookie("mainPopupEn", "Y", 1)
        }
        else
        {
            fn_set_cookie("mainPopupEn", "N", 1)
        }
        
    });
    
    if(fn_get_cookie("mainPopupEn") == "N")
    {
        $("#mainPopup").show();
    }
    
    if(fn_get_cookie("ipChk") == "N")
    {
        $.getJSON("https://ipinfo.io", function(data){
            
            fn_set_cookie("ipChk", "Y"); // 쿠키가 있으면 접속지역 체크하지 않음
            
            if(data.country == "KR")
            {
                location.href = "/kor";
            }
        })
    }
    
    return {    
    }
}();